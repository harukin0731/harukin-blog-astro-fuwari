---
title: Archのmateで通知が死ぬ現象をゴリ押しで解決させる
published: 2019-03-08
tags: ["Archive","Linux","ArchLinux",]
category: Diary
image: https://livedoor.blogimg.jp/harukin0731/imgs/e/7/e79e4857-s.png
draft: false
---


<div>いつからなのかわからないけれど、Archにmateとcompizな環境で運用するとポップアップ通知が死んでるの。</div><div>相性問題なのかもしれないけど、前にまともな構築してた時も今のカオスな構築してる時も同じ問題が発生してるので単純な相性問題ではなさそう。インストールの過程から検証してかないと詳細はわからないだろうな。</div><div>mateのデフォルトを導入しているのでmate-notification-daemonももちろん入ってるが動作していない模様。</div><div><a href="https://livedoor.blogimg.jp/harukin0731/imgs/e/7/e79e4857.png" title="Screenshot" target="_blank"><img src="https://livedoor.blogimg.jp/harukin0731/imgs/e/7/e79e4857-s.png" alt="Screenshot" class="pict" width="480" hspace="5" height="168" border="0"></a><br></div><div>mateの通知設定からテストしてみてもこの有様。<br></div><div>しかし面倒なので手っ取り早く通知を動作させることはできないかと考えてみた。</div><br><div>普通に考えたら、他のサーバーを導入すればいいのだろうけど、dunst等導入してみるもののまともには動作せず....</div><div>今回は、そんな状況で調べて見つけた項目。</div><br><div><a target="_blank" href="https://wiki.archlinux.jp/index.php/%E3%83%87%E3%82%B9%E3%82%AF%E3%83%88%E3%83%83%E3%83%97%E9%80%9A%E7%9F%A5">Arch wiki</a>を見ていると、notification-daemonという項目の中にこんな文があるのがわかる。</div><blockquote><div><code style="display:inline-block; padding: 0 0.3em;">/usr/lib/notification-daemon-1.0/notification-daemon</code> で手動で起動できます。</div></blockquote><div>こいつはgnome派生......mateもgnome派生......ひょっとして？？？</div><div>というわけでディレクリ見てみるとあるじゃない同じような項目！！！！</div><div><a target="_blank" title="Screenshot" href="https://livedoor.blogimg.jp/harukin0731/imgs/9/5/95d377a4.png"><img class="pict" alt="Screenshot" src="https://livedoor.blogimg.jp/harukin0731/imgs/9/5/95d377a4-s.png" width="480" hspace="5" height="330" border="0"></a><br>で、実行して試してみると....</div><div><a target="_blank" title="Screenshot" href="https://livedoor.blogimg.jp/harukin0731/imgs/7/c/7c587450.png"><img class="pict" alt="Screenshot" src="https://livedoor.blogimg.jp/harukin0731/imgs/7/c/7c587450-s.png" width="480" hspace="5" height="241" border="0"></a><br>でるやーん！！！</div><div>なんなんおまえ。使えるんやん。</div><br><br><br><div>。。。。。と思っていた私がいたが。</div><div>問題はここからだったのだ....</div><div>上のスクショに違和感は感じないだろうか？</div><div><span style="color: rgb(0, 0, 0);"><a target="_blank" title="Screenshot" href="https://livedoor.blogimg.jp/harukin0731/imgs/8/d/8d5d130f.png"><img class="pict" alt="Screenshot" src="https://livedoor.blogimg.jp/harukin0731/imgs/8/d/8d5d130f-s.png" width="480" hspace="5" height="234" border="0"></a></span><br><i><b><span style="font-size: 200%;">どういうこと？？？？</span></b></i></div><br><br><div>30秒で正常終了してるんすけど。なにこれ。</div><div>実際色々テストしてみると、通知が来れば待機し続けてくれるみたいだが、通知が来なかったら30秒でタスクが通常終了してしまうようだ。</div><div>なぜ.......</div><br><div>しかしここで終らないのが私。<b><span style="color: rgb(255, 0, 0);">強引に動作させてこそ俺よ！！！</span></b></div><div>簡単なことだが、通知が届かないのはこいつが動いてないから。</div><div>そして、動いていないというより勝手に終了させてしまうから。</div><br><div>つまり？？？？</div><br><div><span style="font-size: 200%;">止まるんじゃねぇぞ.......</span></div><div><span style="font-size: 200%;"><br></span></div><div><span style="font-size: 200%;"><br></span></div><div><span style="font-size: 200%;"><br></span></div><div><span style="font-size: 200%;"><br></span></div><div><span style="font-size: 200%;"><br></span></div><div><a href="https://livedoor.blogimg.jp/harukin0731/imgs/b/2/b20a1fc5.png" title="Screenshot" target="_blank"><img src="https://livedoor.blogimg.jp/harukin0731/imgs/b/2/b20a1fc5-s.png" alt="Screenshot" class="pict" width="480" hspace="5" height="234" border="0"></a><br>はい、この通り。</div><div><b><i><span style="color: rgb(255, 0, 0);"><span style="font-size: 200%;">勝手に止まるタスクはループだw</span></span></i></b></div><div><span style="color: rgb(255, 0, 0);"><span style="font-size: 200%;"><br></span></span></div><div><span style="font-size: 100%; color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);">完璧だネ！これで通知が止まってもwhileループ動作して再起動してくれるから完璧だ！！w</span></span></div><div><span style="font-size: 100%; color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);">後はこれを起動時に自動実行させれば幸せになれる。</span></span></div><div><span style="font-size: 100%; color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><br></span></span></div><div><span style="font-size: 100%; color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><br></span></span></div><div><span style="font-size: 100%; color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);"><br></span></span></div><div><span style="font-size: 100%; color: rgb(255, 0, 0);"><span style="color: rgb(0, 0, 0);">P.S. 結局根本的な解決にはなってないけど正常に通知が働けばいいのSA★根本的な解決をご存知の人や同じ現象な人がいましたらどうぞコメントください！</span></span></div>
